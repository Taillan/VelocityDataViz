{"ast":null,"code":"'use strict';\n\nconst Command = require('./command');\nconst Errors = require('../misc/errors');\nconst RESET_COMMAND = new Uint8Array([1, 0, 0, 0, 0x1f]);\n/**\n * send a COM_RESET_CONNECTION: permits to reset a connection without re-authentication.\n * see https://mariadb.com/kb/en/library/com_reset_connection/\n */\nclass Reset extends Command {\n  constructor(cmdParam, resolve, reject) {\n    super(cmdParam, resolve, reject);\n  }\n  start(out, opts, info) {\n    if (opts.logger.query) opts.logger.query(`RESET`);\n    this.onPacketReceive = this.readResetResponsePacket;\n    out.fastFlush(this, RESET_COMMAND);\n    this.emit('send_end');\n  }\n\n  /**\n   * Read response packet.\n   * packet can be :\n   * - an ERR_Packet\n   * - a OK_Packet\n   *\n   * @param packet  query response\n   * @param out     output writer\n   * @param opts    connection options\n   * @param info    connection info\n   */\n  readResetResponsePacket(packet, out, opts, info) {\n    if (packet.peek() !== 0x00) {\n      return this.throwNewError('unexpected packet', false, info, '42000', Errors.ER_RESET_BAD_PACKET);\n    }\n    packet.skip(1); //skip header\n    packet.skipLengthCodedNumber(); //affected rows\n    packet.skipLengthCodedNumber(); //insert ids\n\n    info.status = packet.readUInt16();\n    this.successEnd();\n  }\n}\nmodule.exports = Reset;","map":{"version":3,"names":["Command","require","Errors","RESET_COMMAND","Uint8Array","Reset","constructor","cmdParam","resolve","reject","start","out","opts","info","logger","query","onPacketReceive","readResetResponsePacket","fastFlush","emit","packet","peek","throwNewError","ER_RESET_BAD_PACKET","skip","skipLengthCodedNumber","status","readUInt16","successEnd","module","exports"],"sources":["/home/warameur/Documents/velocity-data-viz/node_modules/mariadb/lib/cmd/reset.js"],"sourcesContent":["'use strict';\n\nconst Command = require('./command');\nconst Errors = require('../misc/errors');\nconst RESET_COMMAND = new Uint8Array([1, 0, 0, 0, 0x1f]);\n/**\n * send a COM_RESET_CONNECTION: permits to reset a connection without re-authentication.\n * see https://mariadb.com/kb/en/library/com_reset_connection/\n */\nclass Reset extends Command {\n  constructor(cmdParam, resolve, reject) {\n    super(cmdParam, resolve, reject);\n  }\n\n  start(out, opts, info) {\n    if (opts.logger.query) opts.logger.query(`RESET`);\n    this.onPacketReceive = this.readResetResponsePacket;\n    out.fastFlush(this, RESET_COMMAND);\n    this.emit('send_end');\n  }\n\n  /**\n   * Read response packet.\n   * packet can be :\n   * - an ERR_Packet\n   * - a OK_Packet\n   *\n   * @param packet  query response\n   * @param out     output writer\n   * @param opts    connection options\n   * @param info    connection info\n   */\n  readResetResponsePacket(packet, out, opts, info) {\n    if (packet.peek() !== 0x00) {\n      return this.throwNewError('unexpected packet', false, info, '42000', Errors.ER_RESET_BAD_PACKET);\n    }\n\n    packet.skip(1); //skip header\n    packet.skipLengthCodedNumber(); //affected rows\n    packet.skipLengthCodedNumber(); //insert ids\n\n    info.status = packet.readUInt16();\n    this.successEnd();\n  }\n}\n\nmodule.exports = Reset;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,OAAO,GAAGC,OAAO,CAAC,WAAW,CAAC;AACpC,MAAMC,MAAM,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AACxC,MAAME,aAAa,GAAG,IAAIC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;AACxD;AACA;AACA;AACA;AACA,MAAMC,KAAK,SAASL,OAAO,CAAC;EAC1BM,WAAWA,CAACC,QAAQ,EAAEC,OAAO,EAAEC,MAAM,EAAE;IACrC,KAAK,CAACF,QAAQ,EAAEC,OAAO,EAAEC,MAAM,CAAC;EAClC;EAEAC,KAAKA,CAACC,GAAG,EAAEC,IAAI,EAAEC,IAAI,EAAE;IACrB,IAAID,IAAI,CAACE,MAAM,CAACC,KAAK,EAAEH,IAAI,CAACE,MAAM,CAACC,KAAK,CAAE,OAAM,CAAC;IACjD,IAAI,CAACC,eAAe,GAAG,IAAI,CAACC,uBAAuB;IACnDN,GAAG,CAACO,SAAS,CAAC,IAAI,EAAEf,aAAa,CAAC;IAClC,IAAI,CAACgB,IAAI,CAAC,UAAU,CAAC;EACvB;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEF,uBAAuBA,CAACG,MAAM,EAAET,GAAG,EAAEC,IAAI,EAAEC,IAAI,EAAE;IAC/C,IAAIO,MAAM,CAACC,IAAI,EAAE,KAAK,IAAI,EAAE;MAC1B,OAAO,IAAI,CAACC,aAAa,CAAC,mBAAmB,EAAE,KAAK,EAAET,IAAI,EAAE,OAAO,EAAEX,MAAM,CAACqB,mBAAmB,CAAC;IAClG;IAEAH,MAAM,CAACI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IAChBJ,MAAM,CAACK,qBAAqB,EAAE,CAAC,CAAC;IAChCL,MAAM,CAACK,qBAAqB,EAAE,CAAC,CAAC;;IAEhCZ,IAAI,CAACa,MAAM,GAAGN,MAAM,CAACO,UAAU,EAAE;IACjC,IAAI,CAACC,UAAU,EAAE;EACnB;AACF;AAEAC,MAAM,CAACC,OAAO,GAAGzB,KAAK"},"metadata":{},"sourceType":"script","externalDependencies":[]}